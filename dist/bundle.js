!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CrashReport=t():e.CrashReport=t()}(self,(()=>(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{addTrack:()=>n,clearTracks:()=>c,initTracks:()=>i});var o=function(e){var t="",o=null;for(e.id&&(o=e.id);!o&&e!==document.body&&e;){for(var r=e.tagName.toLowerCase(),n=1,a=e.previousElementSibling;a;)a.tagName.toLowerCase()===r&&(n+=1),a=a.previousElementSibling;if(t=1===n?"/".concat(r).concat(t):"/".concat(r,"[").concat(n,"]").concat(t),e.parentElement&&e.parentElement.id){o=e.parentElement.id;break}e=e.parentElement}return o?t="//*[@id='".concat(o,"']").concat(t):null},r=function(e){return function(t){var r=JSON.parse(sessionStorage.getItem("crash_report_tracks")||"[]"),n=o(t.target),a={id:r.length+1,type:e,target:n,time:new Date};r.push(a),sessionStorage.setItem("crash_report_tracks",JSON.stringify(r))}},n=function(e){var t=JSON.parse(sessionStorage.getItem("crash_report_tracks")||"[]");e.id=t.length+1,e.time=new Date,t.push(e),sessionStorage.setItem("crash_report_tracks",JSON.stringify(t))},a=function(e){var t=JSON.parse(sessionStorage.getItem("crash_report_tracks")||"[]"),r=t&&t.length?t[t.length-1]:null,n=o(e.target),a={id:t.length+1,type:"change",target:n,value:e.target.value,time:new Date};r&&"change"===r.type&&r.target===n&&t.pop(),t.push(a),sessionStorage.setItem("crash_report_tracks",JSON.stringify(t))},s=function(){var e=document.location.href,t=document.querySelector("body");new MutationObserver((function(t){if(e!==document.location.href){e=document.location.href;var o=JSON.parse(sessionStorage.getItem("crash_report_tracks")||"[]"),r={id:o.length+1,type:"url",value:e,time:new Date};o.push(r),sessionStorage.setItem("crash_report_tracks",JSON.stringify(o))}})).observe(t,{childList:!0,subtree:!0})},c=function(){sessionStorage.removeItem("crash_report_tracks")},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{events:["click","change","url","dblclick","contextmenu"]},t={click:r("click"),contextmenu:r("contextmenu"),dblclick:r("dblclick"),mousedown:r("mousedown"),mouseenter:r("mouseenter"),mouseleave:r("mouseleave"),mousemove:r("mousemove"),mouseout:r("mouseout"),mouseover:r("mouseover"),mouseup:r("mouseup")};e.events.forEach((function(e){"url"===e?window.onload=s:"change"===e?document.addEventListener("input",a):document.addEventListener(e,t[e])}))};return t})()));