!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CrashReport=t():e.CrashReport=t()}(self,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{addTrack:()=>n,clearTracks:()=>s,getAllTracks:()=>a,initTracks:()=>c});var r=function(e){var t="",r=null;for(e.id&&(r=e.id);!r&&e!==document.body&&e;){for(var o=e.tagName.toLowerCase(),n=1,s=e.previousElementSibling;s;)s.tagName.toLowerCase()===o&&(n+=1),s=s.previousElementSibling;if(t=1===n?"/".concat(o).concat(t):"/".concat(o,"[").concat(n,"]").concat(t),e.parentElement&&e.parentElement.id){r=e.parentElement.id;break}e=e.parentElement}return r?t="//*[@id='".concat(r,"']").concat(t):null},o=function(e,t){return function(o){var n=JSON.parse(sessionStorage.getItem("crash_report_tracks")||"[]"),s=r(o.target),a={id:n.length?n[n.length-1].id+1:1,type:e,target:s,time:new Date};n.length>t+1&&n.shift(),n.push(a),sessionStorage.setItem("crash_report_tracks",JSON.stringify(n))}},n=function(e){var t=JSON.parse(sessionStorage.getItem("crash_report_tracks")||"[]");e.id=t.length?t[t.length-1].id+1:1,e.time=new Date,t.push(e),sessionStorage.setItem("crash_report_tracks",JSON.stringify(t))},s=function(){sessionStorage.removeItem("crash_report_tracks")},a=function(){return JSON.parse(sessionStorage.getItem("crash_report_tracks")||"[]")},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{events:["click","change","url","dblclick","contextmenu"],limit:100},t=e.events,n=e.limit,s={click:o("click",n),contextmenu:o("contextmenu",n),dblclick:o("dblclick",n),mousedown:o("mousedown",n),mouseenter:o("mouseenter",n),mouseleave:o("mouseleave",n),mousemove:o("mousemove",n),mouseout:o("mouseout",n),mouseover:o("mouseover",n),mouseup:o("mouseup",n)};t.forEach((function(e){"url"===e?window.onload=function(e){return function(){var t=document.location.href,r=document.querySelector("body");new MutationObserver((function(r){if(t!==document.location.href){t=document.location.href;var o=JSON.parse(sessionStorage.getItem("crash_report_tracks")||"[]"),n={id:o.length?o[o.length-1].id+1:1,type:"url",value:t,time:new Date};o.length>e+1&&o.shift(),o.push(n),sessionStorage.setItem("crash_report_tracks",JSON.stringify(o))}})).observe(r,{childList:!0,subtree:!0})}}(n):"change"===e?document.addEventListener("input",function(e){return function(t){var o=JSON.parse(sessionStorage.getItem("crash_report_tracks")||"[]"),n=o&&o.length?o[o.length-1]:null,s=r(t.target),a={id:o.length?o[o.length-1].id+1:1,type:"change",target:s,value:t.target.value,time:new Date};o.length>e+1&&o.shift(),n&&"change"===n.type&&n.target===s&&o.pop(),o.push(a),sessionStorage.setItem("crash_report_tracks",JSON.stringify(o))}}(n)):document.addEventListener(e,s[e])}))};return t})()));