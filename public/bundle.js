!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CrashReport=t():e.CrashReport=t()}(self,(()=>(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{addTrack:()=>n,clearTracks:()=>s,initTracks:()=>a});var o=function(e){var t="",o=null;for(e.id&&(o=e.id);!o&&e!==document.body&&e;){for(var r=e.tagName.toLowerCase(),n=1,s=e.previousElementSibling;s;)s.tagName.toLowerCase()===r&&(n+=1),s=s.previousElementSibling;if(t=1===n?"/".concat(r).concat(t):"/".concat(r,"[").concat(n,"]").concat(t),e.parentElement&&e.parentElement.id){o=e.parentElement.id;break}e=e.parentElement}return o?t="//*[@id='".concat(o,"']").concat(t):null},r=function(e,t){return function(r){var n=JSON.parse(sessionStorage.getItem("crash_report_tracks")||"[]"),s=o(r.target),a={id:n[n.length-1].id+1,type:e,target:s,time:new Date};n.length>t+1&&n.shift(),n.push(a),sessionStorage.setItem("crash_report_tracks",JSON.stringify(n))}},n=function(e){var t=JSON.parse(sessionStorage.getItem("crash_report_tracks")||"[]");e.id=t[t.length-1].id+1,e.time=new Date,t.push(e),sessionStorage.setItem("crash_report_tracks",JSON.stringify(t))},s=function(){sessionStorage.removeItem("crash_report_tracks")},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{events:["click","change","url","dblclick","contextmenu"],limit:100},t=e.events,n=e.limit,s={click:r("click",n),contextmenu:r("contextmenu",n),dblclick:r("dblclick",n),mousedown:r("mousedown",n),mouseenter:r("mouseenter",n),mouseleave:r("mouseleave",n),mousemove:r("mousemove",n),mouseout:r("mouseout",n),mouseover:r("mouseover",n),mouseup:r("mouseup",n)};t.forEach((function(e){"url"===e?window.onload=function(e){return function(){var t=document.location.href,o=document.querySelector("body");new MutationObserver((function(o){if(t!==document.location.href){t=document.location.href;var r=JSON.parse(sessionStorage.getItem("crash_report_tracks")||"[]"),n={id:r[r.length-1].id+1,type:"url",value:t,time:new Date};r.length>e+1&&r.shift(),r.push(n),sessionStorage.setItem("crash_report_tracks",JSON.stringify(r))}})).observe(o,{childList:!0,subtree:!0})}}(n):"change"===e?document.addEventListener("input",function(e){return function(t){var r=JSON.parse(sessionStorage.getItem("crash_report_tracks")||"[]"),n=r&&r.length?r[r.length-1]:null,s=o(t.target),a={id:r[r.length-1].id+1,type:"change",target:s,value:t.target.value,time:new Date};r.length>e+1&&r.shift(),n&&"change"===n.type&&n.target===s&&r.pop(),r.push(a),sessionStorage.setItem("crash_report_tracks",JSON.stringify(r))}}(n)):document.addEventListener(e,s[e])}))};return t})()));